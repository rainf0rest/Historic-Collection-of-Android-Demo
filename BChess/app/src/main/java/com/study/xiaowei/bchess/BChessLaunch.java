package com.study.xiaowei.bchess;import android.app.Activity;import android.graphics.Color;import android.os.Bundle;import android.os.SystemClock;import android.util.Log;import android.view.View;import android.widget.Button;import android.widget.Chronometer;import android.widget.TextView;/** * Created by xiaowei on 2015/3/26. */public class BChessLaunch extends Activity {    int[] images = new int[] {            R.drawable.aaa,            R.drawable.bbb,            R.drawable.ccc,            R.drawable.ddd,            R.drawable.eee    };    //Chronometer clock;    //long base;    int[] front = new int[17];    int[] rear = new int[16];    int targetone = 0;    String[] names = {"bug","鼠","猫","狗","狼","豹","虎","狮","象"};    Button one;    Button two;    Button three;    Button four;    Button five;    Button six;    Button seven;    Button eight;    Button nine;    Button ten;    Button eleven;    Button twelve;    Button thirteen;    Button fourteen;    Button fifteen;    Button sixteen;    //Button reset;    int playerOneScore = 0;    int playerTwoScore = 0;    TextView playOne;    TextView playTwo;    @Override    public void onCreate(Bundle savedInstanceState) {        super.onCreate(savedInstanceState);        setContentView(R.layout.main);        int temp = (int)(Math.random()*5);        getWindow().setBackgroundDrawableResource(images[temp]);        /*clock = (Chronometer) findViewById(R.id.Clock);        clock.setBase(SystemClock.elapsedRealtime());        clock.start();        base = clock.getBase();        int temp = (int)(Math.random()*5);        getWindow().setBackgroundDrawableResource(images[temp]);        clock.setOnChronometerTickListener(new Chronometer.OnChronometerTickListener() {            @Override            public void onChronometerTick(Chronometer chronometer) {                if(SystemClock.elapsedRealtime() - base >20*1000){                    int temper = (int)(Math.random()*5);                    getWindow().setBackgroundDrawableResource(images[temper]);                    base = SystemClock.elapsedRealtime();                }            }        });*/        init();        for(int i = 0; i < 17; i++)            front[i] = 0;        playOne = (TextView)findViewById(R.id.playerOne);        playTwo = (TextView)findViewById(R.id.playerTwo);       /* reset = (Button)findViewById(R.id.Reset);        reset.setOnClickListener(new View.OnClickListener() {            @Override            public void onClick(View v) {                init();                for(int i = 1; i < 17; i++){                    front[i] = 0;                }                for(int i =1; i < 17; i++) {                    show(i);                }            }        });*/        one = (Button) findViewById(R.id.One);        one.setOnClickListener(new View.OnClickListener() {            @Override            public void onClick(View v) {                if(front[1] == 0) {                    overturn(1);                    show(1);                }                else if(targetone == 0) {                    targetone = 1;                }                else if(targetone == 1) {                    cancelChoice(targetone);                    targetone = 0;                }                else{                    compare(targetone, 1);                }                showChoice(targetone);            }        });        two = (Button) findViewById(R.id.Two);        two.setOnClickListener(new View.OnClickListener() {            @Override            public void onClick(View v) {                if(front[2] == 0) {                    overturn(2);                    show(2);                }                else if(targetone == 0) {                    targetone = 2;                }                else if(targetone == 2) {                    cancelChoice(targetone);                    targetone = 0;                }                else{                    compare(targetone, 2);                }                showChoice(targetone);            }        });        three = (Button) findViewById(R.id.Three);        three.setOnClickListener(new View.OnClickListener() {            @Override            public void onClick(View v) {                if(front[3] == 0) {                    overturn(3);                    show(3);                }                else if(targetone == 0) {                    targetone = 3;                }                else if(targetone == 3) {                    cancelChoice(targetone);                    targetone = 0;                }                else{                    compare(targetone, 3);                }                showChoice(targetone);            }        });        four = (Button) findViewById(R.id.Four);        four.setOnClickListener(new View.OnClickListener() {            @Override            public void onClick(View v) {                if(front[4] == 0) {                    overturn(4);                    show(4);                }                else if(targetone == 0) {                    targetone = 4;                }                else if(targetone == 4) {                    cancelChoice(targetone);                    targetone = 0;                }                else{                    compare(targetone, 4);                }                showChoice(targetone);            }        });        five = (Button) findViewById(R.id.Five);        five.setOnClickListener(new View.OnClickListener() {            @Override            public void onClick(View v) {                if(front[5] == 0) {                    overturn(5);                    show(5);                }                else if(targetone == 0) {                    targetone = 5;                }                else if(targetone == 5) {                    cancelChoice(targetone);                    targetone = 0;                }                else{                    compare(targetone, 5);                }                showChoice(targetone);            }        });        six = (Button) findViewById(R.id.Six);        six.setOnClickListener(new View.OnClickListener() {            @Override            public void onClick(View v) {                if(front[6] == 0) {                    overturn(6);                    show(6);                }                else if(targetone == 0) {                    targetone = 6;                }                else if(targetone == 6) {                    cancelChoice(targetone);                    targetone = 0;                }                else{                    compare(targetone, 6);                }                showChoice(targetone);            }        });        seven = (Button) findViewById(R.id.Seven);        seven.setOnClickListener(new View.OnClickListener() {            @Override            public void onClick(View v) {                if(front[7] == 0) {                    overturn(7);                    show(7);                }                else if(targetone == 0) {                    targetone = 7;                }                else if(targetone == 7) {                    cancelChoice(targetone);                    targetone = 0;                }                else{                    compare(targetone, 7);                }                showChoice(targetone);            }        });        eight = (Button) findViewById(R.id.Eight);        eight.setOnClickListener(new View.OnClickListener() {            @Override            public void onClick(View v) {                if(front[8] == 0) {                    overturn(8);                    show(8);                }                else if(targetone == 0) {                    targetone = 8;                }                else if(targetone == 8) {                    cancelChoice(targetone);                    targetone = 0;                }                else{                    compare(targetone, 8);                }                showChoice(targetone);            }        });        nine = (Button) findViewById(R.id.Nine);        nine.setOnClickListener(new View.OnClickListener() {            @Override            public void onClick(View v) {                if(front[9] == 0) {                    overturn(9);                    show(9);                }                else if(targetone == 0) {                    targetone = 9;                }                else if(targetone == 9) {                    cancelChoice(targetone);                    targetone = 0;                }                else{                    compare(targetone, 9);                }                showChoice(targetone);            }        });        ten = (Button) findViewById(R.id.Ten);        ten.setOnClickListener(new View.OnClickListener() {            @Override            public void onClick(View v) {                if(front[10] == 0) {                    overturn(10);                    show(10);                }                else if(targetone == 0) {                    targetone = 10;                }                else if(targetone == 10) {                    cancelChoice(targetone);                    targetone = 0;                }                else{                    compare(targetone, 10);                }                showChoice(targetone);            }        });        eleven = (Button) findViewById(R.id.Eleven);        eleven.setOnClickListener(new View.OnClickListener() {            @Override            public void onClick(View v) {                if(front[11] == 0) {                    overturn(11);                    show(11);                }                else if(targetone == 0) {                    targetone = 11;                }                else if(targetone == 11) {                    cancelChoice(targetone);                    targetone = 0;                }                else{                    compare(targetone, 11);                }                showChoice(targetone);            }        });        twelve = (Button) findViewById(R.id.Twelve);        twelve.setOnClickListener(new View.OnClickListener() {            @Override            public void onClick(View v) {                if(front[12] == 0) {                    overturn(12);                    show(12);                }                else if(targetone == 0) {                    targetone = 12;                }                else if(targetone == 12) {                    cancelChoice(targetone);                    targetone = 0;                }                else{                    compare(targetone, 12);                }                showChoice(targetone);            }        });        thirteen = (Button) findViewById(R.id.Thirteen);        thirteen.setOnClickListener(new View.OnClickListener() {            @Override            public void onClick(View v) {                if(front[13] == 0) {                    overturn(13);                    show(13);                }                else if(targetone == 0) {                    targetone = 13;                }                else if(targetone == 13) {                    cancelChoice(targetone);                    targetone = 0;                }                else{                    compare(targetone, 13);                }                showChoice(targetone);            }        });        fourteen = (Button) findViewById(R.id.Fourteen);        fourteen.setOnClickListener(new View.OnClickListener() {            @Override            public void onClick(View v) {                if(front[14] == 0) {                    overturn(14);                    show(14);                }                else if(targetone == 0) {                    targetone = 14;                }                else if(targetone == 14) {                    cancelChoice(targetone);                    targetone = 0;                }                else{                    compare(targetone, 14);                }                showChoice(targetone);            }        });        fifteen = (Button) findViewById(R.id.Fifteen);        fifteen.setOnClickListener(new View.OnClickListener() {            @Override            public void onClick(View v) {                if(front[15] == 0) {                    overturn(15);                    show(15);                }                else if(targetone == 0) {                    targetone = 15;                }                else if(targetone == 15) {                    cancelChoice(targetone);                    targetone = 0;                }                else{                    compare(targetone, 15);                }                showChoice(targetone);            }        });        sixteen = (Button) findViewById(R.id.Sixteen);        sixteen.setOnClickListener(new View.OnClickListener() {            @Override            public void onClick(View v) {                if(front[16] == 0) {                    overturn(16);                    show(16);                }                else if(targetone == 0) {                    targetone = 16;                }                else if(targetone == 16) {                    cancelChoice(targetone);                    targetone = 0;                }                else{                    compare(targetone, 16);                }                showChoice(targetone);            }        });    }    public void init() {        int temp;        for(int i = 0; i < 16; i++) {            temp = getNumber();            while(isExist(temp)){                if(temp == 16)                    temp = 1;                else                    temp++;            }            rear[i] = temp;        }        for(int i = 0; i < 16; i++){            if(rear[i] > 8) {                rear[i] = rear[i] - 17;            }        }    }    public boolean isExist(int number) {        for(int i = 0; i < 16; i++) {            if(rear[i] == number){                return true;            }        }        return false;    }    public int getNumber() {        int number;        number = (int)(Math.random()*15 + 1);        return number;    }    public void overturn(int i) {        int j = i - 1;        front[i] = rear[j];    }    public void compare(int one, int two) {        switch (one){            case 1:                if(two == 2 || two == 5) {                    act(one, two);                }                break;            case 2:                if(two == 1 || two == 3 || two == 6) {                    act(one, two);                }                break;            case 3:                if(two == 2 || two == 4 || two == 7) {                    act(one, two);                }                break;            case 4:                if(two == 3 || two == 8) {                    act(one, two);                }                break;            case 5:                if(two == 1 || two == 9 || two == 6) {                    act(one, two);                }                break;            case 6:                if(two == 2 || two == 5 || two == 7 || two == 10) {                    act(one, two);                }                break;            case 7:                if(two == 3 || two == 6 || two == 8 || two == 11) {                    act(one, two);                }                break;            case 8:                if(two == 4 || two == 12 || two == 7) {                    act(one, two);                }                break;            case 9:                if(two == 13 || two == 5 || two == 10) {                    act(one, two);                }                break;            case 10:                if(two == 6 || two == 9 || two == 11 || two == 14) {                    act(one, two);                }                break;            case 11:                if(two == 12 || two == 15 || two == 7 || two == 10) {                        act(one, two);                }                break;            case 12:                if(two == 8 || two == 11 || two == 16) {                    act(one, two);                }                break;            case 13:                if(two == 9 || two == 14) {                    act(one, two);                }                break;            case 14:                if(two == 13 || two == 15 || two == 10) {                    act(one, two);                }                break;            case 15:                if(two == 11 || two == 14 || two == 16) {                    act(one, two);                }                break;            case 16:                if(two == 12 || two == 15) {                    act(one, two);                }                break;            default:                break;        }    }    public void act(int one, int two) {        //Log.d("www", "aaaa");        if(front[one] != 100){            if(front[two] == 100)                replace(one, two);            else if(front[one] * front[two] < 0) {                //Log.d("ddd", "ccc");                if((front[one] == 1 && front[two] == -8) || (front[one] == -1 && front[two] == 8)){                    replace(one, two);                }                else if((front[two] == 1 && front[one] == -8) || (front[two] == -1 && front[one] == 8)){                    ;                }                else if((front[one] + front[two]) * front[one] > 0) {                    //Log.d("bbb", "ccc");                    replace(one, two);                }                else if(front[one] + front[two] == 0) {                    front[one] = 100;                    front[two] = 100;                }            }            show(one);            show(two);        }        targetone = 0;        if(getWinner() == 2) {            playerOneScore ++;            playOne.setText("" + playerOneScore);        }        else if(getWinner() == 1) {            playerTwoScore ++;            playTwo.setText("" + playerTwoScore);        }    }    public void replace(int one, int two) {        Log.d("rrr","sss");        front[two] = front[one];        front[one] = 100;    }    public int getWinner() {        int i;        for(i = 1; i < 17 && (front[i] < 0 || front[i] == 100); i++);        if(i == 17)            return 1;        else {            for(i = 1; i < 17 && (front[i] > 0 || front[i] == 100); i++);            if(i == 17)                return 2;            else                return 0;        }    }    public void show(int i) {            switch (i){                case 1:                    if(front[i] == 0) {                        one.setText("?");                    }                    else if(front[i] == 100) {                        one.setText("");                    }                    else{                        one.setText("" + names[(Math.abs(front[i]))]);                        if(front[i] > 0)                            one.setTextColor(Color.BLACK);                        else                            one.setTextColor(Color.RED);                    }                    break;                case 2:                    if(front[i] == 0) {                        two.setText("?");                    }                    else if(front[i] == 100) {                        two.setText("");                    }                    else{                        two.setText("" + names[(Math.abs(front[i]))]);                        if(front[i] > 0)                            two.setTextColor(Color.BLACK);                        else                            two.setTextColor(Color.RED);                    }                    break;                case 3:                    if(front[i] == 0) {                        three.setText("?");                    }                    else if(front[i] == 100) {                        three.setText("");                    }                    else{                        three.setText("" + names[(Math.abs(front[i]))]);                        if(front[i] > 0)                            three.setTextColor(Color.BLACK);                        else                            three.setTextColor(Color.RED);                    }                    break;                case 4:                    if(front[i] == 0) {                        four.setText("?");                    }                    else if(front[i] == 100) {                        four.setText("");                    }                    else{                        four.setText("" + names[(Math.abs(front[i]))]);                        if(front[i] > 0)                            four.setTextColor(Color.BLACK);                        else                            four.setTextColor(Color.RED);                    }                    break;                case 5:                    if(front[i] == 0) {                        five.setText("?");                    }                    else if(front[i] == 100) {                        five.setText("");                    }                    else{                        five.setText("" + names[(Math.abs(front[i]))]);                        if(front[i] > 0)                            five.setTextColor(Color.BLACK);                        else                            five.setTextColor(Color.RED);                    }                    break;                case 6:                    if(front[i] == 0) {                        six.setText("?");                    }                    else if(front[i] == 100) {                        six.setText("");                    }                    else{                        six.setText("" + names[(Math.abs(front[i]))]);                        if(front[i] > 0)                        six.setTextColor(Color.BLACK);                        else                        six.setTextColor(Color.RED);                    }                    break;                case 7:                    if(front[i] == 0) {                        seven.setText("?");                    }                    else if(front[i] == 100) {                        seven.setText("");                    }                    else{                       seven.setText("" + names[(Math.abs(front[i]))]);                        if(front[i] > 0)                        seven.setTextColor(Color.BLACK);                        else                        seven.setTextColor(Color.RED);                    }                    break;                case 8:                    if(front[i] == 0) {                        eight.setText("?");                    }                    else if(front[i] == 100) {                        eight.setText("");                    }                    else{                        eight.setText("" + names[(Math.abs(front[i]))]);                        if(front[i] > 0)                        eight.setTextColor(Color.BLACK);                        else                        eight.setTextColor(Color.RED);                    }                    break;                case 9:                    if(front[i] == 0) {                        nine.setText("?");                    }                    else if(front[i] == 100) {                        nine.setText("");                    }                    else{                        nine.setText("" + names[(Math.abs(front[i]))]);                        if(front[i] > 0)                        nine.setTextColor(Color.BLACK);                        else                        nine.setTextColor(Color.RED);                    }                    break;                case 10:                    if(front[i] == 0) {                        ten.setText("?");                    }                    else if(front[i] == 100) {                        ten.setText("");                    }                    else{                        ten.setText("" + names[(Math.abs(front[i]))]);                        if(front[i] > 0)                        ten.setTextColor(Color.BLACK);                        else                        ten.setTextColor(Color.RED);                    }                    break;                case 11:                    if(front[i] == 0) {                        eleven.setText("?");                    }                    else if(front[i] == 100) {                        eleven.setText("");                    }                    else{                        eleven.setText("" + names[(Math.abs(front[i]))]);                        if(front[i] > 0)                        eleven.setTextColor(Color.BLACK);                        else                        eleven.setTextColor(Color.RED);                    }                    break;                case 12:                    if(front[i] == 0) {                        twelve.setText("?");                    }                    else if(front[i] == 100) {                        twelve.setText("");                    }                    else{                        twelve.setText("" + names[(Math.abs(front[i]))]);                        if(front[i] > 0)                        twelve.setTextColor(Color.BLACK);                        else                        twelve.setTextColor(Color.RED);                    }                    break;                case 13:                    if(front[i] == 0) {                        thirteen.setText("?");                    }                    else if(front[i] == 100) {                        thirteen.setText("");                    }                    else{                        thirteen.setText("" + names[(Math.abs(front[i]))]);                        if(front[i] > 0)                        thirteen.setTextColor(Color.BLACK);                        else                        thirteen.setTextColor(Color.RED);                    }                    break;                case 14:                    if(front[i] == 0) {                        fourteen.setText("?");                    }                    else if(front[i] == 100) {                        fourteen.setText("");                    }                    else{                        fourteen.setText("" + names[(Math.abs(front[i]))]);                        if(front[i] > 0)                        fourteen.setTextColor(Color.BLACK);                        else                        fourteen.setTextColor(Color.RED);                    }                    break;                case 15:                    if(front[i] == 0) {                        fifteen.setText("?");                    }                    else if(front[i] == 100) {                        fifteen.setText("");                    }                    else{                        fifteen.setText("" + names[(Math.abs(front[i]))]);                        if(front[i] > 0)                        fifteen.setTextColor(Color.BLACK);                        else                        fifteen.setTextColor(Color.RED);                    }                    break;                case 16:                    if(front[i] == 0) {                        sixteen.setText("?");                    }                    else if(front[i] == 100) {                        sixteen.setText("");                    }                    else{                        sixteen.setText("" + names[(Math.abs(front[i]))]);                        if(front[i] > 0)                        sixteen.setTextColor(Color.BLACK);                        else                        sixteen.setTextColor(Color.RED);                    }                    break;                default:                    break;            }    }    public void showChoice(int target){        switch (target){            case 1:                one.setTextColor(Color.BLUE);                break;            case 2:                two.setTextColor(Color.BLUE);                break;            case 3:                three.setTextColor(Color.BLUE);                break;            case 4:                four.setTextColor(Color.BLUE);                break;            case 5:                five.setTextColor(Color.BLUE);                break;            case 6:                six.setTextColor(Color.BLUE);                break;            case 7:                seven.setTextColor(Color.BLUE);                break;            case 8:                eight.setTextColor(Color.BLUE);                break;            case 9:                nine.setTextColor(Color.BLUE);                break;            case 10:                ten.setTextColor(Color.BLUE);                break;            case 11:                eleven.setTextColor(Color.BLUE);                break;            case 12:                twelve.setTextColor(Color.BLUE);                break;            case 13:                thirteen.setTextColor(Color.BLUE);                break;            case 14:                fourteen.setTextColor(Color.BLUE);                break;            case 15:                fifteen.setTextColor(Color.BLUE);                break;            case 16:                sixteen.setTextColor(Color.BLUE);                break;            default:                break;        }    }    public void cancelChoice(int target){        switch (target){            case 1:                if(front[target] > 0)                    one.setTextColor(Color.BLACK);                else                    one.setTextColor(Color.RED);                break;            case 2:                if(front[target] > 0)                    two.setTextColor(Color.BLACK);                else                    two.setTextColor(Color.RED);                break;            case 3:                if(front[target] > 0)                three.setTextColor(Color.BLACK);                else                three.setTextColor(Color.RED);                break;            case 4:                if(front[target] > 0)                four.setTextColor(Color.BLACK);                else                four.setTextColor(Color.RED);                break;            case 5:                if(front[target] > 0)                five.setTextColor(Color.BLACK);                else                five.setTextColor(Color.RED);                break;            case 6:                if(front[target] > 0)                six.setTextColor(Color.BLACK);                else                six.setTextColor(Color.RED);                break;            case 7:                if(front[target] > 0)                seven.setTextColor(Color.BLACK);                else                seven.setTextColor(Color.RED);                break;            case 8:                if(front[target] > 0)                eight.setTextColor(Color.BLACK);                else                eight.setTextColor(Color.RED);                break;            case 9:                if(front[target] > 0)                nine.setTextColor(Color.BLACK);                else                nine.setTextColor(Color.RED);                break;            case 10:                if(front[target] > 0)                ten.setTextColor(Color.BLACK);                else                ten.setTextColor(Color.RED);                break;            case 11:                if(front[target] > 0)                eleven.setTextColor(Color.BLACK);                else                eleven.setTextColor(Color.RED);                break;            case 12:                if(front[target] > 0)                twelve.setTextColor(Color.BLACK);                else                twelve.setTextColor(Color.RED);                break;            case 13:                if(front[target] > 0)                thirteen.setTextColor(Color.BLACK);                else                thirteen.setTextColor(Color.RED);                break;            case 14:                if(front[target] > 0)                fourteen.setTextColor(Color.BLACK);                else                fourteen.setTextColor(Color.RED);                break;            case 15:                if(front[target] > 0)                fifteen.setTextColor(Color.BLACK);                else                fifteen.setTextColor(Color.RED);                break;            case 16:                if(front[target] > 0)                sixteen.setTextColor(Color.BLACK);                else                sixteen.setTextColor(Color.RED);                break;            default:                break;        }    }}